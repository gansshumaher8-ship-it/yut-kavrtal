---
description: Проверка ошибок и совместимости после каждой доработки кода
alwaysApply: true
---

# Обязательная проверка после каждой доработки

## Базовое правило
**Каждую доработку кода проверяй на ошибки и совместимость.** Не завершай ответ без выполнения проверки.

## Что делать после любых изменений кода
1. **ReadLints** — вызвать для всех изменённых файлов; исправить замечания линтера.
2. **npm run build** — выполнить в проекте; сборка должна завершиться успешно (exit 0). При ошибке — исправить код и повторить.

## Если сломались стили или страница отдаёт 500
- Причина часто — повреждённый кэш Next.js/Webpack (ошибки в терминале: `Cannot find module './377.js'`, ENOENT для `.pack.gz`, `COMPANY_CONTACTS is not defined` при уже исправленном коде).
- **Действия:** удалить папки `.next` и `node_modules/.cache`, затем выполнить `npm run build`. Либо запустить `npm run rebuild` (очистка + сборка).
- После этого пользователь перезапускает `npm run dev` и открывает сайт по URL из терминала.

## Терминал
- При жалобах на стили/ошибки — читать `terminals/*.txt`, искать MODULE_NOT_FOUND, ENOENT, ReferenceError, 404 для CSS/chunks.
- next.config.mjs уже включает memory-кэш в dev, чтобы снизить риск ENOENT; при повторных поломках — снова очистка кэша.

## Интерфейс
- Хуки — всегда вызывать до любого условного `return`.
- См. правило `interface-stability.mdc`.

## По запросу пользователя
- Запуск `npm run dev` в фоне, сообщить URL (localhost:XXXX) для открытия в браузере.
