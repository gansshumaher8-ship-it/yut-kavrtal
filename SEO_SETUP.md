# Инструкция по настройке SEO и переменных окружения

Полная настройка сайта «Уютный Квартал»: переменные окружения, данные сайта в админке и проверка SEO.

---

## 1. Переменные окружения (.env)

Скопируйте `.env.example` в `.env` и заполните значения.

### Обязательные

| Переменная | Описание | Пример |
|------------|----------|--------|
| **NEXTAUTH_SECRET** | Секрет для сессий и cookies. Сгенерируйте: `openssl rand -base64 32` | `a1b2c3d4e5...` |
| **NEXTAUTH_URL** | Полный URL сайта (для авторизации и ссылок в письмах). В production — ваш домен. | `https://uyutny-kvartal.ru` |

### Рекомендуемые для production

| Переменная | Описание | Пример |
|------------|----------|--------|
| **SITE_URL** | Публичный URL сайта. Используется в sitemap, robots, canonical, Open Graph, JSON-LD. Если не задан, берётся NEXTAUTH_URL или заглушка. | `https://uyutny-kvartal.ru` |

### Telegram (заявки и публикация объектов)

| Переменная | Описание | Пример |
|------------|----------|--------|
| **TELEGRAM_BOT_TOKEN** | Токен бота от [@BotFather](https://t.me/BotFather). Нужен для: отправки заявок с сайта в канал, публикации объектов. | `123456:ABC-DEF...` |
| **TELEGRAM_CHANNEL_ID** | ID канала (например `@channel` или `-1001234567890`). Опционально: можно задать в админке в настройках Telegram. | `-1001234567890` |

### Аналитика

| Переменная | Описание | Пример |
|------------|----------|--------|
| **NEXT_PUBLIC_YANDEX_METRIKA_ID** | ID счётчика Яндекс.Метрики. Альтернатива: задать в админке в блоке «Данные сайта» → «ID Яндекс.Метрики». | `12345678` |

### Опционально: верификация для вебмастеров

Добавьте в `<head>` вручную (или через layout), если выдадут коды:

- **Яндекс.Вебмастер**: `<meta name="yandex-verification" content="ВАШ_КОД" />`
- **Google Search Console**: `<meta name="google-site-verification" content="ВАШ_КОД" />`

Коды можно взять в интерфейсах [Яндекс.Вебмастер](https://webmaster.yandex.ru/) и [Google Search Console](https://search.google.com/search-console).

---

## 2. Файл для соцсетей (og:image)

Для красивых превью при публикации ссылки в соцсетях и мессенджерах нужна картинка **Open Graph**.

- **Путь**: положите файл в проект как `public/og-image.png`.
- **Рекомендуемый размер**: 1200×630 px, формат PNG или JPG.
- Содержание: логотип + название «Уютный Квартал» и короткий слоган на спокойном фоне.

Если файла нет, соцсети могут подставить любую картинку со страницы или пустое превью.

---

## 3. Настройки в админке (Данные сайта)

Вход: **/admin** (роль admin). Блок **«Данные сайта»** влияет на SEO и отображение на сайте.

### Обязательно заполнить

| Поле | Зачем нужно |
|------|-------------|
| **Название компании** | Подвал, JSON-LD (Organization), контакты. |
| **ИНН** | Подвал, доверие. |
| **Юридический адрес** | Подвал, JSON-LD, ссылка на Яндекс.Карты. |
| **Телефон** | Шапка, подвал, кнопка «Позвонить», JSON-LD, форма заявки. |
| **Email** | Подвал, JSON-LD, форма. |

### Для SEO и доверия

| Поле | Зачем нужно |
|------|-------------|
| **Текст страницы «О компании»** | Контент страницы /about (поиск, сниппеты). |
| **Текст в подвале (дисклеймер)** | Подвал, юридическая корректность. |
| **Ссылка на политику конфиденциальности** | Подвал, cookie-плашка, доверие. |
| **Ссылка на оферту** | Подвал. |
| **ID Яндекс.Метрики** | Счётчик на сайте (если не задан в NEXT_PUBLIC_YANDEX_METRIKA_ID). |

### Блоки на главной

| Поле | Зачем нужно |
|------|-------------|
| **Доверие: объекты / лет на рынке / объём** | Цифры в блоке доверия на главной. |
| **Как мы работаем** | Строки «Заголовок\|Описание» — блок этапов. |
| **FAQ** | Строки «Вопрос\|Ответ» — блок частых вопросов. |
| **Кейсы** | Строки «Заголовок\|Текст» — блок кейсов. |
| **Текст cookie-плашки** | Текст баннера про cookie (если пусто — плашка не показывается). |

---

## 4. Что уже сделано по SEO на сайте

- **Мета-теги**: title, description, keywords на главной и ключевых страницах.
- **Canonical**: на главной, /about, /owners, /investors, страницах объектов.
- **Open Graph**: title, description, url, images (og-image.png), locale, siteName.
- **Twitter Card**: summary_large_image, title, description.
- **Robots**: разрешён обход, закрыты /admin, /dashboard, /login, /setup, /api.
- **Sitemap**: главная, /about, /owners, /investors, все объекты (/projects/[id]).
- **JSON-LD**: схема Organization (название, url, logo, адрес, контакт).
- **Страницы без индексации**: админка, панель агента, логин, setup (robots: noindex, nofollow).

---

## 5. Проверка после настройки

1. **Переменные**: убедитесь, что в production в .env заданы NEXTAUTH_URL (и при необходимости SITE_URL) с вашим доменом.
2. **Превью в соцсетях**: [Facebook Sharing Debugger](https://developers.facebook.com/tools/debug/), [ВКонтакте](https://dev.vk.com/api/pages/getPagePreview) или отправьте ссылку в Telegram — должна подтянуться картинка и текст.
3. **Структурированные данные**: [Проверка разметки Google](https://validator.schema.org/) или Rich Results Test.
4. **Яндекс**: добавьте сайт в [Вебмастер](https://webmaster.yandex.ru/), загрузите sitemap: `https://ваш-домен.ru/sitemap.xml`.
5. **Google**: добавьте сайт в [Search Console](https://search.google.com/search-console), отправьте sitemap.

---

## 6. Краткий чеклист переменных

```
# Минимум для запуска
NEXTAUTH_SECRET=...
NEXTAUTH_URL=https://ваш-домен.ru

# Рекомендуется
SITE_URL=https://ваш-домен.ru

# Заявки и публикация в Telegram
TELEGRAM_BOT_TOKEN=...
# TELEGRAM_CHANNEL_ID=...  или задать в админке

# Аналитика (или ID в админке)
# NEXT_PUBLIC_YANDEX_METRIKA_ID=...
```

После заполнения .env и «Данных сайта» в админке перезапустите приложение и проверьте главную страницу, /about и одну страницу объекта.
